<!DOCTYPE html>
<html>
  <head>
    <title>Smart Parking - Madinaty</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
      #map {
        height: 100vh;
        width: 100%;
      }
    </style>
  </head>
  <body>
    <div id="map"></div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
      // Center on Madinaty
      const map = L.map("map").setView([30.07, 31.645], 15);

      // Dark tile layer (CartoDB Dark Matter)
      L.tileLayer(
        "https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",
        {
          attribution:
            '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/">CARTO</a>',
          subdomains: "abcd",
          maxZoom: 19,
        }
      ).addTo(map);

      // Dummy spot data (replace with your real data source or fetch it)
      const parkingSpots = [
        { id: "MAD-001", lat: 30.072, lon: 31.646, status: "available" },
        { id: "MAD-002", lat: 30.068, lon: 31.649, status: "occupied" },
        { id: "MAD-003", lat: 30.074, lon: 31.64, status: "available" },
      ];

      // Add markers to map
      parkingSpots.forEach((spot) => {
        const marker = L.circleMarker([spot.lat, spot.lon], {
          color: spot.status === "available" ? "lime" : "crimson",
          radius: 8,
          fillOpacity: 0.8,
        }).addTo(map);

        marker.bindPopup(
          `<strong>${spot.id}</strong><br>Status: ${spot.status}`
        );
      });
    </script>
  </body>
</html>
